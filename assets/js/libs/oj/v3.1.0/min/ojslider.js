/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","jqueryui-amd/widgets/draggable","ojs/ojtouchproxy"],function(a,g){(function(){a.ab("oj.ojSlider",g.oj.editableValue,{defaultElement:"\x3cinput\x3e",version:"1.0.1",widgetEventPrefix:"oj",options:{distance:0,max:100,min:0,orientation:"horizontal",readOnly:!1,disabled:!1,step:1,type:"fromMin",value:0,rawValue:void 0},yha:5,OVa:null,pka:null,eh:function(){return"rtl"===a.Q.Qj()},_ComponentCreate:function(){this._super();this.Xfa=!1;this.element.is("INPUT")?
(this.Xfa=!0,this.element[0].style&&(this.aNa=this.element[0].style.cssText),this.Vfa=this.element.css("display"),this.element.css("display","none"),this.Yg=this.$d?g(this.$d):g(this.element).wrap("\x3cdiv\x3e \x3c/div\x3e").parent()):this.Yg=this.element;this.Oaa()},Oaa:function(){this.sha=[];this.Kj=null;var a="oj-slider ",a=this.Ie()?a+"oj-slider-vertical":a+"oj-slider-horizontal",a=a+" oj-component oj-form-control";this.options.dS&&(a+=" oj-read-only");this.options.disabled&&(a+=" oj-disabled");
this.Yg.removeClass();this.Yg.addClass(a);this.Dh="range"===this.options.type?!0:!1;this.gaa();this.Lza();this.fza();this.Uxa();this.Hza();this.Pza();this.DC();this.Uo()},Qg:function(){this._super();this.SB();var a,b=this.gua();if(b){a=this.Yg.find(".oj-slider-thumb");var d=b.attr("id");d||(d=b.attr("for"));a.attr("aria-labelledby",d);1<b.length&&1<a.length&&a[1].attr("aria-labelledby",String(d))}else if(b=this.$d?this.Yg.attr("aria-label"):this.element.attr("aria-label"))a=this.Yg.find(".oj-slider-thumb"),
a.attr("aria-label",b)},gua:function(){var a=this.MBa();if(null!==a&&0!==a.length)return a;a=this.LBa();return null!==a&&0!==a.length?a:null},LBa:function(){var a;a=this.$d?this.Yg.prop("id"):this.element.prop("id");if(void 0!==a){var b=g("label[for\x3d'"+a+"']");if(0<b.length)return b;a="span[for\x3d'"+a+"']";if(0!==g(a).length)return g(a)}return null},MBa:function(){var a;a=this.$d?this.Yg.attr("aria-labelledby"):this.element.attr("aria-labelledby");if(void 0!==a){var b=g("label[id\x3d'"+a+"']");
if(0<b.length)return b;a=g("span[id\x3d'"+a+"']");if(0<a.length)return a}return null},widget:function(){return this.Yg},uk:function(a){this.pka=a},di:function(){return this.pka},hN:function(){if(this.$d)return this.Yg[0].id||this.Yg.uniqueId(),this.Yg[0].id;this.element[0].id||this.element.uniqueId();return this.element[0].id},RY:function(a){return this.hN()+"-thumb"+a},Nca:function(){return this.hN()+"-barValue"},OBa:function(){return this.hN()+"-barBack"},ADa:function(){return this.hN()+"-sliderWrapper"},
Pza:function(){var a,b,d="",e="class\x3d'oj-slider-thumb ui-state-default' tabindex\x3d'0' role\x3d'slider'"+("aria-valuemin \x3d '"+this.Rd()+"' ")+("aria-valuemax \x3d '"+this.yf()+"' ")+"\x3e\x3c/span\x3e",f=[];b=this.Dh?2:1;for(a=0;a<b;a++)d="\x3cspan "+("id\x3d'"+this.RY(a)+"' ")+e,f.push(d);this.Lj=g(f.join("")).appendTo(this.Fq);this.Xo=this.Lj.eq(0);var h=this;a=0;this.Lj.each(function(){g(this).data("oj-slider-thumb-index",a++);h.Ie()&&g(this).attr("aria-orientation","vertical");h.options.disabled?
(g(this).attr("aria-disabled","true"),g(this).removeAttr("tabindex")):g(this).removeAttr("aria-disabled");h.options.readOnly?g(this).attr("title","read only"):g(this).removeAttr("title")})},Lza:function(){var a=this.ADa(),b=this.Yg.find("#"+a);b.length&&b.remove();this.Fq=g("\x3cdiv\x3e\x3c/div\x3e");g(this.Fq).attr("id",a);this.Fq.addClass("oj-slider-container");this.element.after(this.Fq);this.Fq[0].style.cssText=this.aNa},fza:function(){var a=this.OBa(),b=this.Yg.find("#"+a);b.length&&b.remove();
this.pf=g("\x3cdiv\x3e\x3c/div\x3e");g(this.pf).attr("id",a);this.pf.addClass("oj-slider-bar");this.Fq.append(this.pf);var d=this;this.pf.on("mousedown"+d.eventNamespace,function(a){d.Oia(a);d.$G(a);d.YF().focus()})},Uxa:function(){this.options.type&&(null==this.options.value?(this.options.value=this.Dh?[this.Rd(),this.yf()]:this.Rd(),this.option("value",this.options.value,{_context:{yd:!0,kb:!0}})):this.Dh&&2!==this.options.value.length&&(this.options.value=[0<this.options.value.length?this.options.value[0]:
this.Rd(),this.yf()],this.option("value",this.options.value,{_context:{yd:!0,kb:!0}})))},Hza:function(){var a=this.options,b="";if(a.type){this.Yc=g("\x3cdiv\x3e\x3c/div\x3e");g(this.Yc).attr("id",this.Nca());this.Fq.append(this.Yc);var b="oj-slider-range oj-slider-bar-value",d=this;this.Yc.on("mousedown"+d.eventNamespace,function(a){d.Oia(a);d.$G(a);d.YF().focus()});this.Yc=this.Fq.find("#"+this.Nca());var e="";"fromMin"===a.type?e=" oj-slider-range-min":"fromMax"===a.type&&(e=" oj-slider-range-max");
this.Yc.addClass(b+e)}else this.Yc&&this.Yc.remove(),this.Yc=null},c1:function(c){this.hI=a.wg.t2(c)},t1:function(c){a.wg.Z4(c)},Uo:function(){this.Ip()&&this.Yf(this.Yg);this.Lj.toArray().forEach(function(a){a=g(a);this.mx(a);this._on(a,this.oNa);this.c1(a);this._focusable({element:a,applyHighlight:!0})},this)},_GetMessagingLauncherElement:function(){return this.Yg},ag:function(){return this.YF()},Oba:function(){this.Lj.toArray().forEach(function(a){a=g(a);this.t1(a)},this);this.Yc&&this.Yc.remove();
this.Fq&&this.Fq.remove();this.$d?(this.Yg.removeUniqueId(),this.gx(this.Yg)):(this.element.removeUniqueId(),this.gx(this.element))},NNa:function(){a.Q.unwrap(this.element,this.Yg);this.element.css("display",this.Vfa);this.JA(this.element)},_destroy:function(){this.Oba();this.NNa();return this._super()},Oia:function(a){var b,d,e=this.options,f=0,h=this;this.Kaa=this.Xo;if(e.disabled||e.readOnly)return!1;b=this.$Ca({x:a.pageX,y:a.pageY});d=this.yf()-this.Rd()+1;this.Dh&&this.Lj.each(function(a){var c=
Math.abs(b-h.us(a));if(d>c||d===c&&(a===h.RHa||h.us(a)===e.min))d=c,this.Kaa=g(this),f=a});this.Kj=f;if(!this.Kaa)return!0;this.Lj.hasClass("ui-state-hover")||this.Eq(a,f,b);this.YF().addClass("oj-active").focus();this.Yc.addClass("oj-active");return!0},yGa:function(a,b){var d=this.options;if(d.disabled||d.readOnly)return!1;b.removeClass("oj-focus-highlight");b.addClass("oj-active").focus();this.Yc.addClass("oj-active");return!0},yIa:function(a,b){var d=this.Uda(b);this.Eq(a,this.Kj,d,!0);d=100*this.lda(b);
this.Dh?this.Rja(d,this.Kj):this.Oja(d);return!1},$G:function(a,b){this.Lj.removeClass("oj-active");this.Yc.removeClass("oj-active");var d=this.Uda(b);this.Eq(a,this.Kj,d);this.Vl(a,this.Kj,!1);this.Kj=null;return!1},Ie:function(){return"vertical"===this.options.orientation},Vda:function(a){1<a&&(a=1);0>a&&(a=0);this.Ie()&&(a=1-a);return a},$Ca:function(a){var b=this.wCa(a);a=this.yf()-this.Rd();this.eh()&&!this.Ie()&&(b=1-b);return this.jm(this.Rd()+b*a)},wCa:function(a){var b;this.Ie()?(b=this.pf.height(),
a=a.y-this.pf.offset().top):(b=this.pf.width(),a=a.x-this.pf.offset().left);return 0===b?1:b=this.Vda(a/b)},YF:function(){return this.Dh?g(this.Lj[this.Kj]):this.Xo},lda:function(a){var b;(b=a)||(b=this.YF());this.Ie()?(a=b.outerHeight()/2,a=b.offset().top+a,b=this.pf.height(),a-=this.pf.offset().top):(a=b.outerWidth()/2,a=b.offset().left+a,b=this.pf.width(),a-=this.pf.offset().left);return 0===b?1:b=this.Vda(a/b)},Uda:function(a){var b;a=this.lda(a);b=this.yf()-this.Rd();this.eh()&&!this.Ie()&&(a=
1-a);return this.jm(this.Rd()+a*b)},bDa:function(a){return this.us(a?0:1)},WCa:function(a,b,d){return 2===this.options.value.length&&(0===a&&b>d||1===a&&b<d)?d:b},Eq:function(a,b,d,e){var f;this.Dh?(f=this.bDa(b),d=this.WCa(b,d,f),d!==this.us(b)&&this.jMa(a,b,d,e)):d!==this.EN()&&(this.wMa(a,d,e),e||this.Xfa&&this.element.val(d))},wMa:function(a,b,d){this.GO=this.jm(b);this.Sl(this.GO,a);d||(this.dc(this.GO,a),this.DC())},Vl:function(a,b,d){this.Dh?(this.Sga=this.XCa(b,this.sha[b]),this.Sl(this.Sga,
a),d||this.dc(this.Sga,a)):(this.Sl(this.GO,a),d||this.dc(this.GO,a));this.RHa=b},XCa:function(a,b){var d,e;d=this.options.value.slice();for(e=0;e<d.length;e+=1)d[e]=this.jm(d[e]);a===this.Kj&&(d[a]=b);return d},EN:function(){return this.Eea()},us:function(a){return this.LDa(a)},jMa:function(a,b,d,e){this.sha[b]=this.jm(d);this.Vl(a,b,e);e||this.DC()},_setOption:function(a,b,d){var e;if("value"===a)if(Array.isArray(b))if(isNaN(b[0]))this.Dh=!1,e=this.wq(a,b[0]),this.$r(e,this.Rd(),this.yf());else{this.Dh=
!0;e=b;for(var f=0;f<e.length;f+=1)this.$r(e[f],this.Rd(),this.yf())}else this.Dh=!1,e=this.wq(a,b),this.$r(e,this.Rd(),this.yf());if("max"===a||"min"===a)if(e=this.wq(a,b),"min"===a)if(this.nW(e,this.yf()),this.Dh)for(f=0;f<e.length;f+=1)this.$r(this.us(f),e,this.yf());else this.$r(this.EN(),e,this.yf());else{if("max"===a)if(this.nW(this.Rd(),e),this.Dh)for(f=0;f<e.length;f+=1)this.$r(this.us(f),this.Rd(),e);else this.$r(this.EN(),this.Rd(),e)}else e="step"===a?this.iH(b):b;"disabled"!==a&&this._super(a,
e,d);"readOnly"===a&&(this.options.dS=e);"disabled"===a&&(this.options.disabled=e);switch(a){case "value":this.DC();this.SB();break;case "min":case "max":this.gaa();this.DC();this.SB();break;case "orientation":case "readonly":case "step":case "type":case "disabled":this.OJa()}},OJa:function(){this.Oba();this.Oaa();this.Qg()},Eea:function(){var a=this.options.value;return a=this.jm(a)},LDa:function(a){return this.jm(this.options.value[a])},jm:function(a){if(a<=this.Rd())return this.Rd();if(a>=this.yf())return this.yf();
var b=0<this.options.step?this.options.step:1,d=(a-this.Rd())%b;a-=d;2*Math.abs(d)>=b&&(a+=0<d?b:-b);return parseFloat(a.toFixed(5))},gaa:function(){var a=this.Rd();this.max=0!==(this.options.max-a)/this.options.step%1?this.options.max-(this.options.max-a)%this.options.step:this.options.max},Rd:function(){return this.options.min},yf:function(){return this.max},mda:function(){var a;a=0<this.options.step?(this.yf()-this.Rd())/this.options.step:100;a=(this.Ie()?this.pf.height():this.pf.width())/a;1>
a&&(a=1);return this.Ie()?[1,a]:[a,1]},SY:function(a){return(this.us(a)-this.Rd())/(this.yf()-this.Rd())},DC:function(){var a,b,d,e;this.Dh?this.Lj.toArray().forEach(function(b,h){var k=g(b);a=100*this.SY(h);this.eh()&&!this.Ie()&&(a=100-a);this.Ie()?k.css({top:100-a+"%"}):k.css({left:a+"%"});k.hasClass("oj-active")||(k.attr("aria-valuenow",this.us(h)),k.attr("aria-valuemin",d),k.attr("aria-valuemax",e));this.Rja(a,h)},this):(b=this.Eea(),d=this.Rd(),e=this.yf(),a=e!==d?(b-d)/(e-d)*100:0,this.eh()&&
!this.Ie()&&(a=100-a),this.Ie()?this.Xo.css({top:100-a+"%"}):this.Xo.css({left:a+"%"}),g(this.Xo).hasClass("oj-active")||(g(this.Xo).attr("aria-valuenow",b),g(this.Xo).attr("aria-valuemin",d),g(this.Xo).attr("aria-valuemax",e)),this.Oja(a))},Oja:function(a){var b=this.options.type;this.Ie()?("fromMin"===b&&this.Yc.css({height:a+"%"}),"fromMax"===b&&this.Yc.css({height:100-a+"%"})):this.eh()?("fromMin"===b&&this.Yc.css({width:100-a+"%"}),"fromMax"===b&&this.Yc.css({width:a+"%"})):("fromMin"===b&&this.Yc.css({width:a+
"%"}),"fromMax"===b&&this.Yc.css({width:100-a+"%"}))},Rja:function(a,b){var d=this.Yc.attr("id");if(0===b)switch(d=100*this.SY(1),this.options.type){case "fromMin":this.Ie()?this.Yc.css({height:a+"%"}):this.Yc.css({width:a+"%"});break;case "range":this.Ie()?(this.Yc.css({top:100-d+"%"}),this.Yc.css({height:d-a+"%"})):this.eh()?(this.Yc.css({left:100-d+"%"}),this.Yc.css({width:d-(100-a)+"%"})):(this.Yc.css({left:a+"%"}),this.Yc.css({width:d-a+"%"}))}else{var e=100*this.SY(0);switch(this.options.type){case "fromMax":this.Ie()?
this.Yc.css({height:100-a+"%"}):this.Yc.css({width:100-a+"%"});break;case "range":this.Ie()?document.getElementById(d)&&(this.Yc.css({top:100-a+"%"}),this.Yc.css({height:a-e+"%"})):this.eh()?document.getElementById(d)&&(this.Yc.css({left:a+"%"}),this.Yc.css({width:-a+100-e+"%"})):document.getElementById(d)&&this.Yc.css({width:a-parseInt(document.getElementById(d).style.left,10)+"%"})}}},oNa:{keydown:function(a){var b,d,e,f=g(a.target).data("oj-slider-thumb-index");this.Kj=f;switch(a.keyCode){case g.ui.keyCode.HOME:case g.ui.keyCode.END:case g.ui.keyCode.PAGE_UP:case g.ui.keyCode.PAGE_DOWN:case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:a.preventDefault(),
g(a.target).addClass("oj-active")}e=this.options.step;b=this.Dh?d=this.us(f):d=this.EN();switch(a.keyCode){case g.ui.keyCode.HOME:d=this.Rd();break;case g.ui.keyCode.END:d=this.yf();break;case g.ui.keyCode.PAGE_UP:d=this.jm(b+(this.yf()-this.Rd())/this.yha);break;case g.ui.keyCode.PAGE_DOWN:d=this.jm(b-(this.yf()-this.Rd())/this.yha);break;case g.ui.keyCode.UP:if(b===this.yf())return;d=this.jm(b+e);break;case g.ui.keyCode.RIGHT:if(!this.eh()||this.Ie()){if(b===this.yf())return;b+=e}else{if(b===this.Rd())return;
b-=e}d=this.jm(b);break;case g.ui.keyCode.DOWN:if(b===this.Rd())return;d=this.jm(b-e);break;case g.ui.keyCode.LEFT:if(!this.eh()||this.Ie()){if(b===this.Rd())return;b-=e}else{if(b===this.yf())return;b+=e}d=this.jm(b)}this.Eq(a,f,d)},keyup:function(a){switch(a.keyCode){case g.ui.keyCode.HOME:case g.ui.keyCode.END:case g.ui.keyCode.PAGE_UP:case g.ui.keyCode.PAGE_DOWN:case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:var b=g(a.target).data("oj-slider-thumb-index");
this.Kj=b;this.Vl(a,b,!1);g(a.target).removeClass("oj-active");this.DC(!0);this.Kj=null}}},Sg:function(c,b){var d=this.options,e=this;this._superApply(arguments);a.pa.br([{ra:"disabled",Te:!0},{ra:"value"},{ra:"title"},{ra:"min"},{ra:"max"},{ra:"step"}],b,this,function(a){for(var b=["value","step","min","max"],c=0;c<b.length;c++){var f=b[c],g=f in a?a[f]:d[f];null!=g&&("step"===f?a[f]=e.iH(g):"min"===f||"max"===f?a[f]=e.wq(f,g):"value"===f&&(Array.isArray(g)?a[f]=g:a[f]=e.wq(f,g)))}});if(void 0===
d.value)throw Error(this.R("noValue"));this.nW(d.min,d.max);if(Array.isArray(d.value))for(var f=0;f<d.value.length;f+=1)this.$r(d.value[f],d.min,d.max);else this.$r(d.value,d.min,d.max)},$r:function(a,b,d){if(null!=b&&a<b)throw Error(this.R("valueRange"));if(null!=d&&a>d)throw Error(this.R("valueRange"));},nW:function(a,b){if(null!=a&&null!=b&&a>b)throw Error(this.R("maxMin"));},getNodeBySubId:function(a){if(null==a)return this.element?this.element[0]:null;a=a.subId;return"oj-slider-thumb-0"===a?
this.widget().find(".oj-slider-thumb")[0]:"oj-slider-thumb-1"===a?this.widget().find(".oj-slider-thumb")[1]:"oj-slider-bar"===a||"oj-slider-bar-value"===a?this.widget().find("."+a)[0]:null},getSubIdByNode:function(a){if(null!=a){if(a.id===this.RY(0)&&g(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-0"};if(a.id===this.RY(1)&&g(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-1"};if(g(a).hasClass("oj-slider-bar"))return{subId:"oj-slider-bar"};if(g(a).hasClass("oj-slider-bar-value"))return{subId:"oj-slider-bar-value"}}return null},
_GetDefaultStyleClass:function(){return"oj-slider"},wq:function(a,b){var d;d=null!==b?+b:b;if(isNaN(d))throw Error(this.R("optionNum",{option:a}));return d},iH:function(a){if(null===a)return 1;a=this.wq("step",a);if(0>=a)throw Error(this.R("invalidStep"));if(null===a||0>=a)a=1;return a},VVa:function(){return this.pf.offset().left+this.pf.width()},dWa:function(){return this.pf.offset().left},haa:function(a){var b=this.mda(),d=a[0].style,e=this;a.draggable({axis:this.Ie()?"y":"x",grid:b,disabled:!1,
start:function(b){a[0]===g(e.Lj)[0]?e.Kj=0:a[0]===g(e.Lj)[1]&&(e.Kj=1);e.yGa(b,a)},drag:function(b,h){var k=h.position;e.Ie()?(d.left="",k.left=""):(d.top="",k.top="");e.yIa(b,a);e.Ie()?(0>k.top&&(k.top=0),k.top>e.pf.height()&&(k.top=e.pf.height())):(0>k.left&&(k.left=0),k.left>e.pf.width()&&(k.left=e.pf.width()));if(e.Dh){var l;l=0===e.Kj?g(e.Lj[1]):g(e.Lj[0]);if(e.Ie()){var m=a.outerHeight()/2,p=e.pf.offsetParent().offset().top;l=l.offset().top+m-p}else m=a.outerWidth()/2,p=e.pf.offsetParent().offset().left,
l=l.offset().left+m-p;0===e.Kj?e.Ie()?k.top<l&&(k.top=l):e.eh()?k.left<l&&(k.left=l):k.left>l&&(k.left=l):e.Ie()?k.top>l&&(k.top=l):e.eh()?k.left>l&&(k.left=l):k.left<l&&(k.left=l)}},stop:function(b){this.style.width="";this.style.height="";e.$G(b,a)}})},SB:function(){this.options.disabled||(this.Dh?this.Lj.toArray().forEach(function(a){a=g(a);this.haa(a)},this):this.haa(this.Xo))},PVa:function(){this.Dh?this.Lj.toArray().forEach(function(a){a=g(a);a.is(".ui-draggable")&&a.draggable("disable")},this):
this.Xo.is(".ui-draggable")&&this.Xo.draggable("disable")}})})();(function(){var c=/^\[.*\]/;a.U.qb("oj-slider","editableValue",{properties:{distance:{type:"number"},max:{type:"number"},min:{type:"number"},orientation:{type:"string"},rawValue:{type:"number|Array\x3cNumber\x3e",readOnly:!0,writeback:!0},step:{type:"number"},type:{type:"string"},value:{type:"number|Array\x3cNumber\x3e",writeback:!0}},methods:{},extension:{Rg:"input",nb:"ojSlider"}});a.U.register("oj-slider",{metadata:a.U.getMetadata("oj-slider"),
parseFunction:function(a,d,e,f){return"rawValue"!==d&&"value"!==d||!c.test(a)?f(a):JSON.parse(a)}})})()});