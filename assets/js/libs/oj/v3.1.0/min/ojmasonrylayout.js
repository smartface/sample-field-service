/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojdnd"],function(a,g){function c(a,d,e,f,g,k){null==c.zV&&(c.zV=c.IBa());this.Qd=a;this.ni=d;this.Axa=e;f&&f.qra&&(this.pNa=f.qra);g&&(g.tra&&(this.D1=g.tra),g.sra&&(this.C1=g.sra),g.xra&&(this.I1=g.xra),g.wra&&(this.H1=g.wra),g.ura&&(this.F1=g.ura),g.vra&&(this.FP=g.vra),g.zra&&(this.K1=g.zra),g.Ara&&(this.L1=g.Ara),g.yra&&(this.J1=g.yra));k&&(k.rI&&(this.Ii=k.rI),k.JJ&&(this.ih=k.JJ),k.Kna&&(this.lea=k.Kna),k.Tna&&(this.TY=k.Tna),k.Zqa&&(this.iv=
k.Zqa),k.uoa&&(this.FB=k.uoa),k.Woa&&(this.PB=k.Woa),k.Voa&&(this.vq=k.Voa),k.Uoa&&(this.Wu=k.Uoa),k.bra&&(this.WH=k.bra),k.kf&&(this.pC=k.kf),k.mg&&(this.qC=k.mg),k.Ld&&(this.to=k.Ld));d=document.createElement("div");e=d.style;e.display="inline-block";e.overflow="hidden";e.visibility="hidden";f=document.createElement("div");e=f.style;e.display="inline-block";d.appendChild(f);a.insertBefore(d,a.firstChild);this.nka=d;this.Ly=f;var l=this;this.pq=function(a){l.Wx(a)};this.yfa=function(){l.jGa()};this.Sx=
function(a){l.rZ(a)};this.Vx=function(a){l.yZ(a)};this.x0=function(){l.kn()}}(function(){function b(a){for(;a;){a=a.nextSibling;var b=!0;if(a){var c=a.style;!c||c.visibility!==t&&c.display!==s||(b=!1)}if(a&&1===a.nodeType&&b)return a}return null}function d(a,b){for(var c=a;c;){var d=c.style;if(d&&(d.visibility===t||d.display===s))break;d=c.parentNode;if(d===b)return c;c=d}return null}function e(a,b){return b.te<a.te?1:a.te<b.te?-1:0}function f(a){a&&a.sort(e);return a}function h(a){var b=null;a=g(a);
a.hasClass("oj-masonrylayout-tile-1x1")?b={colSpan:1,rowSpan:1}:a.hasClass("oj-masonrylayout-tile-2x1")?b={colSpan:2,rowSpan:1}:a.hasClass("oj-masonrylayout-tile-3x1")?b={colSpan:3,rowSpan:1}:a.hasClass("oj-masonrylayout-tile-1x2")?b={colSpan:1,rowSpan:2}:a.hasClass("oj-masonrylayout-tile-1x3")?b={colSpan:1,rowSpan:3}:a.hasClass("oj-masonrylayout-tile-2x2")?b={colSpan:2,rowSpan:2}:a.hasClass("oj-masonrylayout-tile-2x3")?b={colSpan:2,rowSpan:3}:a.hasClass("oj-masonrylayout-tile-3x2")&&(b={colSpan:3,
rowSpan:2});return b}function k(a){var b=null;a=g(a);a.hasClass("oj-masonrylayout-tile-1x1")?b="oj-masonrylayout-tile-1x1":a.hasClass("oj-masonrylayout-tile-2x1")?b="oj-masonrylayout-tile-2x1":a.hasClass("oj-masonrylayout-tile-3x1")?b="oj-masonrylayout-tile-3x1":a.hasClass("oj-masonrylayout-tile-1x2")?b="oj-masonrylayout-tile-1x2":a.hasClass("oj-masonrylayout-tile-1x3")?b="oj-masonrylayout-tile-1x3":a.hasClass("oj-masonrylayout-tile-2x2")?b="oj-masonrylayout-tile-2x2":a.hasClass("oj-masonrylayout-tile-2x3")?
b="oj-masonrylayout-tile-2x3":a.hasClass("oj-masonrylayout-tile-3x2")&&(b="oj-masonrylayout-tile-3x2");return b}function l(a,b){g(a).removeClass(b)}function m(a,b){g(a).addClass(b)}a.ab("oj.ojMasonryLayout",g.oj.baseComponent,{defaultElement:"\x3cdiv\x3e",widgetEventPrefix:"oj",options:{reorderHandle:null,beforeInsert:null,insert:null,beforeRemove:null,remove:null,beforeResize:null,resize:null,beforeReorder:null,reorder:null},_ComponentCreate:function(){this._super();this.element.addClass("oj-masonrylayout oj-component");
this.options.disabled&&a.C.warn(w);this.Hz=this.eventNamespace+"ReorderHandle";this.Xa={};this.Xa.xi=!1;this.Xa.Uf=!1;this.Xa.L5=!1;this.Xa.sl=!1;this.Xa.Am=!1;this.Nu();this.hF();this.hb(!0)},refresh:function(){this._super();var a="rtl"===this.sd()!==this.Li;a&&this.Mba();this.hb(a)},Pp:function(){this._super();this.uf?this.hb(this.uf[0]):this.Ch.yp(!0)},oo:function(){this._super();this.uf?this.hb(this.uf[0]):this.Ch.yp(!0)},hi:function(a,b,c){this.qJa(b);(a=this.Xa.Uf.children().not(".oj-helper-hidden"))&&
0<a.length&&this.ji(b,c,{launcher:g(b.target).closest(":tabbable")})},hb:function(b){if(this.rF()){this.uf=null;this.Li="rtl"===this.sd();this.lu=a.Q.Qe();var d=this.element,e=this.options;if(b){var g=this;this.iv=function(a){g.TMa(a)};this.FB=function(a){g.iGa(a)};this.PB=function(){g.WHa()};this.vq=function(){g.VHa()};this.Wu=function(a){g.UHa(a)};if(!this.Ch){var r={};r.qra=u;var n={tra:"oj-masonrylayout-transition-resize-to",sra:"oj-masonrylayout-transition-resize-to-fast",xra:"oj-masonrylayout-tile-transition-move-to",
wra:"oj-masonrylayout-tile-transition-move-to-fast",ura:"oj-masonrylayout-tile-transition-hide-from",vra:"oj-masonrylayout-tile-transition-hide-to"};n.zra=v;n.Ara="oj-masonrylayout-tile-transition-show-to";n.yra="oj-masonrylayout-tile-transition-resize-to";var q={};q.rI=m;q.JJ=l;q.Kna=k;q.Tna=h;q.Zqa=this.iv;q.uoa=this.FB;q.Woa=this.PB;q.Voa=this.vq;q.Uoa=this.Wu;q.bra=f;q.kf=a.Components.kf;q.mg=a.Components.mg;q.Ld=function(a){return g.vk(a)};this.qLa();this.Ch=new c(d[0],this.Li,"enabled"===a.oa.h3(),
r,n,q)}this.Vea=function(a){g.lZ(a)};this.Sea=function(a){g.iZ(a)};this.Uea=function(a){g.kZ(a)};this.Tea=function(a){g.jZ(a)};this.Qea=function(a){g.hZ(a)};this.Wea=function(a){g.mZ(a)};e.reorderHandle&&this.$ja()}else e=d.children(),this.s1(e),this.b1(e),this.nya();this.Ch.yp(b);b&&(this.Ik=function(){g.bh()},a.Q.Xk(d[0],this.Ik,D))}else d=!1,this.uf&&(d=this.uf[0]),this.uf=[b||d]},_destroy:function(){this.xx();var b=this.element;a.Q.zm(b[0],this.Ik);this.Ik=null;this.mLa();for(var c=this.oq(),
d=c.length,e=0;e<d;e++)delete c[e].te;this.Mba();b.removeClass("oj-masonrylayout oj-component");this.options.reorderHandle&&this.Lka();this.TA=this.Wu=this.vq=this.PB=this.FB=this.iv=this.Wea=this.Qea=this.Tea=this.Uea=this.Sea=this.Vea=null;this._super()},_setOption:function(b,c,d){var e=!1;switch(b){case "reorderHandle":this.Lka();e=!0;break;case "disabled":a.C.warn(w);break;case "contextMenu":a.Q.Qe()||(this.xx(),c&&this.Nu(c))}this._super(b,c,d);e&&c&&this.$ja()},resizeTile:function(a,b){var c=
this.Ch;c.gR()&&c.yQ();var d=g(a),e=d[0],f=k(e);if(b==f)throw Error("JET MasonryLayout: Unable to resize child "+a+" to style class "+b+" because "+b+" is already applied.");!1!==this._trigger("beforeResize",null,{tile:d,previousSizeStyleClass:f,sizeStyleClass:b})&&(this.jF||(this.jF=[]),this.jF.push(e,f,b),c.resizeTile(a,b))},insertTile:function(b,c){var d=this.Ch;d.gR()&&d.yQ();isNaN(c)&&(c=-1);var e=g(b),f=e[0];!1!==this._trigger("beforeInsert",null,{tile:e,index:c})&&(f.Oga=c,d.Sj()&&e.addClass(v),
e=f.style,e.top="-1px",this.Li?e.right="-1px":e.left="-1px",this.Ou(f,c),d.hSa(f,c),a.Components.kf(f),this.TA||(this.TA=[]),this.TA.push(b))},removeTile:function(b){var c=this.Ch;c.gR()&&c.yQ();var d=g(b),e=d[0];if(a.af.iQ(e)){var f=this.oq(!0),e=f.indexOf(e);0<e&&(this.ZW=f[e-1])}!1!==this._trigger("beforeRemove",null,{tile:d})&&c.XRa(b)},bh:function(){this.Wp||this.Efa||this.Ch.STa()},TMa:function(a){var b=g(a),c=a.Oga;delete a.Oga;this.options.reorderHandle&&this.b1(b);this.jB.push("insert",{tile:b,
index:c})},iGa:function(b){var c=g(b);this.options.reorderHandle&&this.s1(c);a.Components.mg(b);b.parentNode.removeChild(b);this.bP(b);this.jB.push("remove",{tile:c})},WHa:function(){if(this.TA){for(var a=this.Ch,b=this.TA,c=0;c<b.length;c++)a.xUa(b[c]);this.TA=null}if(this.jF){a=this.jF;for(c=0;c<a.length;c+=3){var b=a[c+1],d=a[c+2],b={tile:g(a[c]),previousSizeStyleClass:b,sizeStyleClass:d};this.jB.push("resize",b)}this.jF=null}this.Wp&&(this.YL?this.tEa():this.LV&&this.Rea())},VHa:function(){this.Efa=
!0;this.yO=null;this.jB=[];var b=document.activeElement;b&&a.Q.cr(this.element[0],b)&&(this.yO=b)},UHa:function(b){this.Efa=!1;var c=this.element[0];if(this.yO){var d=this.yO;this.yO=null;if(this.ZW){if(d=this.ZW,this.ZW=null,d&&a.Q.cr(c,d)){var c=this.oq(c,!0),e=c.indexOf(d);0<=e&&e<c.length-1?a.af.e3(c[e+1]):a.af.e3(d)}}else a.Q.cr(c,d)?a.af.BI(d):a.af.e3(c)}b&&b();if(this.jB)for(b=this.jB,this.jB=null,d=0;d<b.length;d+=2)this._trigger(b[d],null,b[d+1])},Mba:function(){var a=this.Ch;a&&a.destroy();
this.Ch=null},rF:function(){var a=document.createElement("div"),b=a.style;b.width="10px";b.height="10px";b=this.element[0];b.appendChild(a);var c=!1;try{c=0<a.offsetWidth&&0<a.offsetHeight}catch(d){}b.removeChild(a);return c},oq:function(a){for(var b=this.element.children(u),c=b.length,d=[],e=0;e<c;e++){var f=b[e];if(!a||a&&f!==this.dg){var g=f.style;g.visibility!==t&&g.display!==s&&d.push(f)}}return d},qLa:function(){var a=this.oq();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.te||(c.te=b+1)}},
nya:function(){var a=this.oq();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.te||this.Ou(c,b)}},mLa:function(){var b=this.oq(),c=this.oq();f(c);for(var d=0;d<b.length;d++){var e=b[d],g=c[d];e!=g&&(a.Components.mg(g),e.parentNode.insertBefore(g,e),a.Components.kf(g),e=b.indexOf(g),e>d&&(b.splice(e,1),b.splice(d,0,g)))}},Ou:function(a,b){var c=this.oq();0>b&&(b=c.length);if(c)for(var d=0;d<c.length;d++){var e=c[d];e.te&&e.te>=b+1&&e.te++}a.te=b+1},bP:function(a){if(a.te){var b=this.oq();if(b)for(var c=
0;c<b.length;c++){var d=b[c];d.te&&d.te>a.te&&d.te--}delete a.te}},Nu:function(a){var b=null,c=null;a||this.options.contextMenu||(b=this.element.attr("contextmenu"))&&(this.options.contextMenu="#"+b);if(a||this.options.contextMenu){b=a||this.options.contextMenu;c=g.type(b);if("function"==c){try{b=b()}catch(d){b=null}g.type(b)}if(b){if(b=g(b)){b.css("display",s);c=this.Xa;if(!c)return;c.Uf=b;c.xi=!0}this.Xa.xi&&a&&this.hF()}}},hF:function(){if(this.Xa&&this.Xa.xi&&this.options.reorderHandle){var a=
this.Xa.Uf,b=this;a.on("ojselect",g.proxy(this.dm,this));var c=!1;a.find("[data-oj-command]").each(function(){if(0===g(this).children("a").length){var a=g(this).attr("data-oj-command").slice(17);g(this).replaceWith(b.wk(a));g(this).addClass("oj-menu-item");c=!0}});c&&a.ojMenu("refresh");this.Xa.L5=a.find("#"+y);this.Xa.sl=a.find("#"+x);this.Xa.Am=a.find("#"+z)}},xx:function(){var a=this.Xa;a&&a.xi&&(a.xi=!1,a.Uf.off("ojselect"),a.Uf=null)},qJa:function(a){var c=this.element,e=a.originalEvent.target,
f=this.options.reorderHandle;a=!1;f&&(f=g(e).closest(f))&&0<f.length&&(a=!0);c=d(e,c[0]);this.Xa.tile=c;if(this.Xa.xi){var e=this.Xa.lQ,f=!1,h=this.Xa.L5;if(h){var k=h.hasClass("oj-helper-hidden");a||k?a&&k&&(h.removeClass("oj-helper-hidden"),f=!0):(h.addClass("oj-helper-hidden"),f=!0);var l=h.hasClass(r),k=!1;e&&c===e&&(k=!0);k&&!l?(h.addClass(r),f=!0):!k&&l&&(h.removeClass(r),f=!0)}if(h=this.Xa.sl)k=h.hasClass("oj-helper-hidden"),a||k?a&&k&&(h.removeClass("oj-helper-hidden"),f=!0):(h.addClass("oj-helper-hidden"),
f=!0),l=h.hasClass(r),k=!1,e&&c!==e&&c!==b(e)||(k=!0),k&&!l?(h.addClass(r),f=!0):!k&&l&&(h.removeClass(r),f=!0);if(h=this.Xa.Am)k=h.hasClass("oj-helper-hidden"),a||k?a&&k&&(h.removeClass("oj-helper-hidden"),f=!0):(h.addClass("oj-helper-hidden"),f=!0),a=h.hasClass(r),k=!1,e&&e!==c&&e!==b(c)||(k=!0),k&&!a?(h.addClass(r),f=!0):!k&&a&&(h.removeClass(r),f=!0);f&&this.Xa.Uf.ojMenu("refresh")}},wk:function(a){var b=A[a];a=G[a];var c=g('\x3ca href\x3d"#"\x3e\x3c/a\x3e');c.text(this.R(a));c.wrap("\x3cli id\x3d"+
b+"\x3e\x3c/li\x3e");return c.parent()},lIa:function(a){a&&(this.Xa.lQ=a)},lha:function(a,b){if(a&&this.Xa.lQ){var c=this.Xa.lQ;this.Xa.lQ=!1;this.CAa(c,a,b)}},CAa:function(a,c,d){var e=a.te-1,f=g(a);if(!1!==this._trigger("beforeReorder",null,{tile:f,fromIndex:e})){this.bP(a);var h=c.te-1;d||h++;var k=this.element[0];d||(c=b(c));this.Ou(a,h);k.insertBefore(a,c);this.Ch.yp(!0);this._trigger("reorder",null,{tile:f,fromIndex:e,toIndex:h})}},dm:function(a,b){var c=b?b.item.attr("id"):void 0;c===y?this.lIa(this.Xa.tile):
c===x?this.lha(this.Xa.tile,!0):c===z&&this.lha(this.Xa.tile,!1)},uea:function(a){var b=this.oq(!0);f(b);for(var c=b.length,d=0;d<c;d++)if(b[d]===a)return d;return-1},$ja:function(){var a=this.element,b=a.children();this.b1(b);a.on("dragstart"+this.Hz,this.Vea).on("dragenter"+this.Hz,this.Sea).on("dragover"+this.Hz,this.Uea).on("dragleave"+this.Hz,this.Tea).on("dragend"+this.Hz,this.Qea).on("drop"+this.Hz,this.Wea)},b1:function(a){var b=this.options;a.filter(b.reorderHandle).attr(n,"true").addClass(q);
a.find(b.reorderHandle).attr(n,"true").addClass(q)},Lka:function(){var a=this.element,b=a.children();this.s1(b);a.off(this.Hz)},s1:function(a){var b=this.options;a.filter(b.reorderHandle).removeAttr(n).removeClass(q);a.find(b.reorderHandle).removeAttr(n).removeClass(q)},lZ:function(a){var b=this.options;if(b.reorderHandle){var c=a.originalEvent.target,c=g(c).closest(b.reorderHandle);if(!c||1>c.length)return}b.reorderHandle&&!this.Wp&&(c=a.target,b=d(c,this.element[0]))&&(c=this.uea(b),b.i_=c,c={tile:g(b),
fromIndex:c},!1!==this._trigger("beforeReorder",null,c)&&(a=a.originalEvent,this.lX(b,a.pageX,a.pageY,a.dataTransfer)))},iZ:function(b){if(this.Wp){b=b.originalEvent;var c=b.relatedTarget,d=this.element[0],e=!1;c?e=d!=c&&!a.Q.cr(d,c):this.bca&&(e=(c=document.elementFromPoint(b.clientX,b.clientY))&&(c==d||a.Q.cr(d,c)));e&&((this.bca=!1,this.wu)?this.dg&&(g(this.dg).css("display",""),this.Ch.yp(!1,!0)):b.dataTransfer.dropEffect="none")}},kZ:function(a){if(!this.Wp)return!1;var b=a.originalEvent;b.dataTransfer.dropEffect=
"move";this.KAa(b.pageX,b.clientX,b.clientY);a.preventDefault();return!1},jZ:function(b){if(this.Wp){var c=b.originalEvent,d=c.relatedTarget;b=this.element[0];var e=!1;e=d?b!=d&&!a.Q.cr(b,d):(c=document.elementFromPoint(c.clientX,c.clientY))&&c!=b&&!a.Q.cr(b,c);e&&(this.bca=!0,this.dg&&(g(this.dg).css("display",s),this.Ch.yp(!1,!0)))}},Aaa:function(){if(this.LM){clearTimeout(this.LM);this.LM=null;var a=this.wu;a&&g(a).removeClass("oj-drag")}},hZ:function(){this.Aaa();if(this.Wp&&!this.NV){var b=this.wu;
if(b&&this.dg){var c=this.dg;a.Q.cr(this.element[0],b)&&(g(c).css("display",""),this.bP(c),c.parentNode.removeChild(c),g(b).css("display",""),this.Ou(b,b.te-1),this.Ch.yp(!1,!0));delete b.i_}this.dg=this.wu=null;this.$L=this.YL=!1;this.kX=null;this.Wp=this.LV=!1}},mZ:function(a){if(!this.Wp)return!1;var b=this.Ch;b.gR()&&b.yQ();this.Aaa();b=a.originalEvent;this.UAa(this.wu,b.pageX,b.pageY);a.stopPropagation();return!1},lX:function(b,c,d,e){this.Wp=!0;this.MV=this.$L=this.NV=!1;this.wu=b;var f=this.element[0],
h=k(b),l=this.dg=document.createElement("div");l.te=b.te;l.className=h+" oj-drop";var h=l.style,m=b.style;h.top=m.top;this.Li?h.right=m.right:h.left=m.left;h=g(b).offset();f.insertBefore(l,b);this.kX=c={left:c-h.left,top:d-h.top};g(b).addClass("oj-drag");e.effectAllowed="move";e.setData("text/html",b.outerHTML);e.setDragImage(b,c.left,c.top);var r=this;this.LM=setTimeout(function(){r.MV=!0;m.display=s;g(b).removeClass("oj-drag");r.LM=null;a.Components.lw(b)},0)},KAa:function(a,c,e){this.$L=!0;if(this.MV&&
!this.YL){var f=this.element[0];c=document.elementFromPoint(c,e);c=d(c,f);e=!1;if(c){var h=g(c),k=this.options.reorderHandle;k&&(e=(e=h.find(k))&&0<e.length)}c&&c!==this.dg&&c!==this.wu&&e&&(h=g(f).offset(),e=b(this.dg),a=a-h.left>=c.offsetLeft+.5*c.offsetWidth,this.bP(this.dg),a&&!this.Li||!a&&this.Li?(a=b(c))?(this.Ou(this.dg,a.te-1),f.insertBefore(this.dg,a)):(this.Ou(this.dg,c.te),f.appendChild(this.dg)):(this.Ou(this.dg,c.te-1),f.insertBefore(this.dg,c)),e!==b(this.dg)&&(this.YL=this.Ch.yp(!1,
!0)))}},tEa:function(){this.YL=!1},UAa:function(b,c,d){this.NV=!0;var e=this.element[0],f=this.dg;this.dg=null;a.Components.mg(b);e.replaceChild(b,f);a.Components.kf(b);b.te=f.te;f=b.style;f.display="";a.Components.Gt(b);var h=g(e).offset(),k=this.kX;f.top=d-k.top-h.top+p;c=c-k.left-h.left;this.Li?(f.right=e.offsetWidth-(c+g(b).outerWidth(!0))+p,f.left=""):f.left=c+p;this.kX=null;this.$L?this.LV=this.Ch.yp(!1,!0):this.Rea()},Rea:function(){this.MV=this.$L=this.NV=this.Wp=this.LV=!1;var a=this.wu;
this.wu=null;var b=a.i_;delete a.i_;var c=this.uea(a),a={tile:g(a),fromIndex:b,toIndex:c};this._trigger("reorder",null,a)},vk:function(b){var c=this.element,d=a.Context.getContext(c[0]).Ne(),e="MasonryLayout",c=c.attr("id"),e=e+(" (id\x3d'"+c+"')")+(": "+b);return d.Ld({description:e})},getNodeBySubId:function(a){return this._super(a)},getSubIdByNode:function(a){return this._super(a)}});var p="px",t="hidden",s="none",n="draggable",r="oj-disabled",q="oj-draggable",u=".oj-masonrylayout-tile-1x1, .oj-masonrylayout-tile-1x2, .oj-masonrylayout-tile-1x3, .oj-masonrylayout-tile-2x1, .oj-masonrylayout-tile-2x2, .oj-masonrylayout-tile-2x3, .oj-masonrylayout-tile-3x1, .oj-masonrylayout-tile-3x2",
v="oj-masonrylayout-tile-transition-show-from",w="JET MasonryLayout: 'disabled' option not supported",y="ojmasonrylayoutcut",x="ojmasonrylayoutpastebefore",z="ojmasonrylayoutpasteafter",A={cut:y,"paste-before":x,"paste-after":z},G={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter"},D=25})();c.prototype.yp=function(a,c){var e=!1;a?(e=this.Jf()?!0:!1,this.Kia()):(this.to&&(this.xk=this.to("performing layout (setup)")),this.vq&&this.vq(),this.M1(c),e=this.G1());return e};
c.prototype.destroy=function(){this.kn();for(var a=this.Qd,c=this.Qx(),e=0;e<c.length;e++){var f=c[e].style;this.ni?f.right="":f.left="";f.top=""}a.removeChild(this.nka);this.to=this.qC=this.pC=this.WH=this.Wu=this.vq=this.PB=this.FB=this.iv=this.TY=this.lea=this.ih=this.Ii=this.Qd=this.Yr=this.Up=this.Tm=this.Vp=this.Ul=this.x0=this.Vx=this.Sx=this.yfa=this.pq=this.Ly=this.nka=null};c.prototype.resizeTile=function(a,c){var e=this.Qd.querySelector(a);if(e){this.Vp||(this.Vp=[]);var f=this.Vp;f.push(e);
f.push(c);this.Via=!0;this.qH()}};c.prototype.hSa=function(a,c){var e=this.Qx();this.WH&&this.WH(e);var f=null;0<=c&&c<e.length&&(f=e[c]);this.Qd.insertBefore(a,f);this.qH()};c.prototype.xUa=function(a){if(a=this.Qd.querySelector(a))this.Tm||(this.Tm=[]),this.Tm.push(a),this.i1=!0,this.No!==c.e9&&this.No!==c.nL?this.qH():this.i1=!1};c.prototype.XRa=function(a){if(a=this.Qd.querySelector(a))this.Up||(this.Up=[]),this.Up.push(a),this.zfa=!0,this.qH()};c.prototype.STa=function(){this.Via||this.zfa||
this.i1||(this.to&&(this.xk=this.to("performing layout (resizeNotify)")),this.vq&&this.vq(),this.M1(!1),this.G1())};c.prototype.Sj=function(){if(this.Nka)return!1;this.Wxa||(this.pxa=this.Axa?!1:c.rHa(c.zV[0],c.zV[1]),this.Wxa=!0);return this.pxa};c.prototype.gR=function(){return null!=this.No||null!=this.Ul&&0<this.Ul.length};c.prototype.yQ=function(){this.Nka=!0;this.Is(this.I1);this.Is(this.H1);this.Is(this.F1);this.Is(this.FP);this.Is(this.K1);this.Is(this.L1);this.Is(this.J1);this.ih(this.Ly,
this.D1);this.ih(this.Ly,this.C1);c.Cg(this.Qd,"transitionend",this.pq);c.Cg(this.Qd,"webkitTransitionEnd",this.pq);for(var a=this.Qx(),d=0;d<a.length;d++){var e=a[d];e.VL&&delete e.VL;c.Cg(e,"transitionend",this.Sx);c.Cg(e,"webkitTransitionEnd",this.Sx);c.Cg(e,"transitionend",this.Vx);c.Cg(e,"webkitTransitionEnd",this.Vx)}this.GB?(clearTimeout(this.GB),this.GB=null,this.rZ(null)):this.nC?(clearTimeout(this.nC),this.nC=null,this.h1()):this.No===c.nL||null!=this.Ul&&0<this.Ul.length?this.Wx(null):
this.No===c.f9&&this.yZ(null);this.Nka=!1};c.sCa=function(a){var d=c.aG(a);return{qj:a.offsetWidth+(c.Fj(d.marginLeft)+c.Fj(d.marginRight)),fl:a.offsetHeight+(c.Fj(d.marginTop)+c.Fj(d.marginBottom))}};c.rCa=function(a){a=c.aG(a);return{paddingLeft:c.Fj(a.paddingLeft),paddingRight:c.Fj(a.paddingRight),paddingTop:c.Fj(a.paddingTop),paddingBottom:c.Fj(a.paddingBottom),borderLeftWidth:c.Fj(a.borderLeftWidth),borderRightWidth:c.Fj(a.borderRightWidth),borderTopWidth:c.Fj(a.borderTopWidth),borderBottomWidth:c.Fj(a.borderBottomWidth)}};
c.aG=function(a){var c=a.ownerDocument.defaultView,e=null;return e=c?c.getComputedStyle(a,null):a.currentStyle};c.Fj=function(a){return 0<a.length&&"auto"!=a?(a=parseInt(a,10),isNaN(a)&&(a=0),a):0};c.Hi=function(a,c,e){a.addEventListener?a.addEventListener(c,e,!1):a.attachEvent&&a.attachEvent("on"+c,e)};c.Cg=function(a,c,e){a.removeEventListener?a.removeEventListener(c,e,!1):a.detachEvent&&a.detachEvent("on"+c,e)};c.D$=function(a,c){if(a)for(var e=0;e<a.length;e++)if(a[e]==c)return e;return-1};c.rHa=
function(a,c){var e=["gecko",16,"trident",6,"webkit",533.1],f=e.length;if(0==f%2)for(var g=0;g<=f-2;g+=2)if(a==e[g]){if(c>=e[1+g])return!0;break}return!1};c.IBa=function(){var a=c.hm,d=null,e=-1,f=navigator.userAgent.toLowerCase();-1!=f.indexOf("msie")||-1!=f.indexOf("trident")?(d="trident",e=a(f,/trident\/(\d+[.]\d+)/),-1==e&&(e=a(f,/msie (\d+\.\d+);/),-1==e&&(e=a(f,/msie (\d+\.\d+)b;/)),e-=4),null!=document.documentMode&&(e=Math.min(e,document.documentMode-4))):-1!=f.indexOf("applewebkit")?(d="webkit",
e=a(f,/applewebkit\/(\d+([.]\d+)*)/)):-1!=f.indexOf("gecko/")&&(d="gecko",e=a(f,/rv:(\d+[.]\d+)/));return[d,e]};c.hm=function(a,c){var e=a.match(c);return e&&(e=e[1])?parseFloat(e):-1};c.Rya=function(a,c){return a.qS>c.qS?1:a.qS<c.qS?-1:a.pS>c.pS?1:a.pS<c.pS?-1:0};c.prototype.qH=function(){this.aO||(this.No?this.d0||(this.d0=!0):(this.to&&(this.xk=this.to("performing layout")),this.aO=setTimeout(this.yfa,0)))};c.prototype.Qx=function(){for(var a=this.Qd.querySelectorAll(this.pNa),c=[],e=0;e<a.length;e++){var f=
a[e],g=f.style;0<f.offsetWidth&&0<f.offsetHeight&&"hidden"!=g.visibility&&c.push(f)}return c};c.prototype.G1=function(){var a=this.Ul,d=this.Jf();if(this.Vp){var e=this.Vp;d||(d=[]);for(var f=0;f<e.length;f+=2){var g=e[f];0>c.D$(d,g)&&d.push(g)}}e=!1;if(!d||1>d.length){if(!a||1>a.length)this.Ul=null,this.Wx(null),e=!0}else this.Ul=d;a=null!=d&&0<d.length;this.Sj()||e||this.Wx(null);return a};c.prototype.Jf=function(){var a=this.Qd,d=this.Qx();this.WH&&this.WH(d);var e=this.jW=null;this.pu=0;this.Oa=
1;this.XB=null;var f=[],g=[],k=[],l=this.ni,m=c.rCa(a),p=0,t=[];this.C$=t;for(var s=0;s<d.length;s++){var n=d[s],r=this.TY(n);(e=n.VL)&&delete n.VL;if(!this.jW){var q=r;e&&(q=document.createElement("div"),q.className=e,q=this.TY(q));this.jW=this.Xxa(n,q)}e=this.jW;this.XB||(this.pu=Math.max(Math.floor((a.offsetWidth-m.paddingLeft-m.paddingRight-m.borderLeftWidth-m.borderRightWidth)/e.qj),1),this.EGa(this.pu,this.Oa),p=this.pu);r.colSpan>p&&(p=r.colSpan);r.colSpan>this.pu&&(r.colSpan=this.pu);for(var u=
!1,q=0;q<this.Oa;q++){for(var v=0;v<this.pu;v++)if(this.zBa(v,q,r)){var u=n.style,w={top:u.top};l?w.right=u.right:w.left=u.left;g.push(w);this.V_(n,v,q,r,e,m);l&&k.push(v);u=!0;t.push({pS:v,qS:q,tile:n});break}if(u)break;q===this.Oa-1&&this.h$()}}e&&(a=this.Ly.style,a.width=p*e.qj+"px",a.height=this.Oa*e.fl+"px");for(s=0;s<d.length;s++)n=d[s],u=n.style,w=g[s],""!=w.top&&(l&&parseInt(u.right,10)!==parseInt(w.right,10)||!l&&parseInt(u.left,10)!==parseInt(w.left,10)||parseInt(u.top,10)!==parseInt(w.top,
10))&&f.push(n);1>f.length&&(f=null);return f};c.prototype.Kia=function(){var a=this.C$;this.C$=null;for(var a=a.sort(c.Rya),d=this.Qx(),e=0;e<d.length;e++){var f=d[e],g=a[e].tile;f!=g&&(this.qC(g),f.parentNode.insertBefore(g,f),this.pC(g),f=c.D$(d,g),f>e&&(d.splice(f,1),d.splice(e,0,g)))}};c.prototype.EGa=function(a,c){for(var e=this.XB=[],f=0;f<c;f++){var g=[];e.push(g);for(var k=0;k<a;k++)g[k]=!1}};c.prototype.h$=function(){this.Oa++;var a=[];this.XB.push(a);for(var c=0;c<this.pu;c++)a[c]=!1};
c.prototype.zBa=function(a,c,e){var f=e.colSpan;e=e.rowSpan;for(var g=c;g<c+e;g++){g>=this.Oa&&this.h$();for(var k=a;k<a+f;k++)if(k>=this.pu||this.XB[g][k])return!1}return!0};c.prototype.V_=function(a,c,e,f,g,k){var l=f.colSpan;f=f.rowSpan;for(var m=this.XB,p=e;p<e+f;p++)for(var t=c;t<c+l;t++)m[p][t]=!0;a=a.style;a.top=k.paddingTop+e*g.fl+"px";this.ni?a.right=k.paddingRight+c*g.qj+"px":a.left=k.paddingLeft+c*g.qj+"px"};c.prototype.Xwa=function(a){for(var c=this.Qx(),e=0;e<c.length;e++)this.Ii(c[e],
a)};c.prototype.Is=function(a){for(var c=this.Qx(),e=0;e<c.length;e++)this.ih(c[e],a)};c.prototype.M1=function(a){this.Uga||(this.Lia=a,this.Sj()&&(this.Xwa(a?this.H1:this.I1),this.Ii(this.Ly,a?this.C1:this.D1),c.Hi(this.Qd,"transitionend",this.pq),c.Hi(this.Qd,"webkitTransitionEnd",this.pq)),this.Uga=!0)};c.prototype.Wx=function(a){var d=!0;if(this.Ul){var e=this.Ul;if(a){var f=a.target;for(a=0;a<e.length;a++)if(f===e[a]){e=this.Ul=[];break}}else this.Sj()||(e=this.Ul=[]);0<e.length&&(d=!1)}if(d){if(this.Vp&&
(d=this.Vp,this.Vp=null,this.Sj()))for(a=0;a<d.length;a+=2)this.ih(d[a],this.J1);this.Lia?(this.Sj()&&(this.Is(this.H1),this.ih(this.Ly,this.C1)),this.Lia=!1):this.Sj()&&(this.Is(this.I1),this.ih(this.Ly,this.D1));this.Sj()&&(c.Cg(this.Qd,"transitionend",this.pq),c.Cg(this.Qd,"webkitTransitionEnd",this.pq));this.i1=this.zfa=this.Via=this.Uga=!1;this.Kia();this.PB&&this.PB();if(this.No===c.nL)if(this.Sj()){var g=this;this.nC=setTimeout(function(){g.h1()},0)}else this.h1();else this.No||this.Wu&&this.Wu(this.x0)}};
c.prototype.Xxa=function(a,d){var e=c.sCa(a);return{qj:e.qj/d.colSpan,fl:e.fl/d.rowSpan}};c.prototype.jGa=function(){this.aO&&(clearTimeout(this.aO),this.aO=null);this.vq&&this.vq();this.No=c.e9;if(this.Up&&this.Sj()){for(var a=this.Up,d=0;d<a.length;d++){var e=a[d];c.Hi(e,"transitionend",this.Sx);c.Hi(e,"webkitTransitionEnd",this.Sx);this.Ii(e,this.F1)}var f=this;this.GB=setTimeout(function(){for(var c=0;c<a.length;c++){var d=a[c];f.ih(d,f.F1);f.Ii(d,f.FP)}},0)}else this.rZ(null)};c.prototype.rZ=
function(a){this.GB&&(clearTimeout(this.GB),this.GB=null);if(a){a.preventDefault();a.stopPropagation();a=a.target;this.ih(a,this.FP);c.Cg(a,"transitionend",this.Sx);c.Cg(a,"webkitTransitionEnd",this.Sx);var d=this.Up;if(d){for(var e=0;e<d.length;e++){var f=d[e];if(f===a){d.splice(e,1);this.Yr||(this.Yr=[]);var g=this.Yr;g.push(a);break}}1>d.length&&(this.Up=null)}}else if(!this.Sj()&&(d=this.Up)){for(e=0;e<d.length;e++)f=d[e],this.Yr||(this.Yr=[]),g=this.Yr,g.push(f);this.Up=null}if(!this.Up){if(this.Yr){g=
this.Yr;for(e=0;e<g.length;e++)a=g[e],this.Sj()&&this.ih(a,this.FP),d=a.style,this.ni?d.right="":d.left="",d.top="",this.FB&&this.FB(a);this.Yr=null}this.No=c.nL;this.M1(!1);if(this.Vp)for(g=this.Vp,e=0;e<g.length;e+=2)a=g[e],d=g[e+1],f=this.lea(a),this.ih(a,f),this.Ii(a,d),this.Sj()&&(this.Ii(a,this.J1),a.VL=f);this.G1()}};c.prototype.h1=function(){this.nC&&(clearTimeout(this.nC),this.nC=null);this.No=c.f9;if(this.Tm&&this.Sj())for(var a=this.Tm,d=0;d<a.length;d++){var e=a[d];c.Hi(e,"transitionend",
this.Vx);c.Hi(e,"webkitTransitionEnd",this.Vx);this.Ii(e,this.L1);this.ih(e,this.K1)}else{if(this.Tm)for(a=this.Tm,d=0;d<a.length;d++)e=a[d],this.ih(e,this.K1);this.yZ(null)}};c.prototype.yZ=function(a){if(a){a.preventDefault();a.stopPropagation();a=a.target;this.ih(a,this.L1);c.Cg(a,"transitionend",this.Vx);c.Cg(a,"webkitTransitionEnd",this.Vx);var d=this.Tm;if(d){for(var e=0;e<d.length;e++){var f=d[e];if(f===a){d.splice(e,1);this.iv&&this.iv(a);break}}1>d.length&&(this.Tm=null)}}else if(!this.Sj()&&
(d=this.Tm)){for(e=0;e<d.length;e++)f=d[e],this.iv&&this.iv(f);this.Tm=null}this.Tm||(this.No=null,this.Wu&&this.Wu(this.x0),this.d0&&(this.d0=!1,this.qH()))};c.prototype.kn=function(){this.xk&&(this.xk(),this.xk=null)};c.e9=1;c.nL=2;c.f9=3;a.U.qb("oj-masonry-layout","baseComponent",{properties:{reorderHandle:{type:"string"}},methods:{insertTile:{},removeTile:{},resizeTile:{}},events:{beforeInsert:{},beforeRemove:{},beforeReorder:{},beforeResize:{},insert:{},remove:{},reorder:{},resize:{}},extension:{nb:"ojMasonryLayout"}});
a.U.register("oj-masonry-layout",{metadata:a.U.getMetadata("oj-masonry-layout")})});