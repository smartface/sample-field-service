/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(a,g){function c(a,c,e,f,g,k,l,m){this.Qd=a;this.aJa=c;this.YA=e;this.aM=f;g&&(g.lTa&&(this.tJa=g.lTa),g.VSa&&(this.KIa=g.VSa),g.iqa&&(this.uJa=g.iqa),g.Qpa&&(this.LIa=g.Qpa),g.hqa&&(this.sJa=g.hqa),g.Ppa&&(this.JIa=g.Ppa));k&&(k.Hqa&&(this.ija=k.Hqa),k.aQa&&(this.JX=k.aQa),k.WOa&&(this.tx=k.WOa),k.Xk&&(this.RL=k.Xk),k.zm&&(this.$O=k.zm),k.rI&&(this.Ii=k.rI),k.JJ&&(this.ih=k.JJ),k.qoa&&(this.TN=k.qoa),k.Fma&&(this.wX=k.Fma),k.mg&&(this.qC=
k.mg),k.kf&&(this.pC=k.kf),k.Ld&&(this.to=k.Ld));l&&(l.$pa&&(this.Jha=l.$pa),l.dma&&(this.Uaa=l.dma),l.Poa&&(this.gy=l.Poa),l.toa&&(this.EB=l.toa));this.ZL=!0;this.nB=0;m&&(this.v$=m.browserVersion);a=navigator.userAgent.toLowerCase();if(-1!==a.indexOf("gecko/"))this.Dxa=!0;else if(-1!==a.indexOf("opera"))this.Exa=!0;else if(m&&"safari"===m.browser)this.G$=!0;else if(!m||"edge"!==m.browser)if(-1!==a.indexOf("applewebkit")||-1!==a.indexOf("safari"))this.Fxa=!0}c.prototype.yp=function(a){var d=this;
if(a){this.tza();this.Fza(this.tJa,this.uJa,this.sJa);this.wza(this.KIa,this.LIa,this.JIa);var e=this.Mk;this.V$=e.offsetWidth;this.U$=e.offsetHeight;this.$N();this.YN();this.aH=function(a){d.yFa(a)};c.Hi(this.Qd,"mousewheel",this.aH);c.Hi(this.Qd,"wheel",this.aH);this.A1=function(a){d.EZ(a)};c.Hi(this.fh,"touchstart",this.A1);this.z1=function(a){d.DZ(a)};c.Hi(this.fh,"touchmove",this.z1);this.fI=function(a){d.BZ(a)};c.Hi(this.fh,"touchend",this.fI);c.Hi(this.fh,"touchcancel",this.fI);this.N_=0}else this.uia();
this.sW();this.q$(a);this.bh(!0);a&&(this.RL&&(this.Ik=function(){d.bh(!1)},this.RL.call(this.tx,this.Qd,this.Ik),this.RL.call(this.tx,this.Yl,this.Ik)),this.pC&&this.pC(this.Yl))};c.prototype.destroy=function(){this.kn();var a=this.Qd;c.Cg(a,"mousewheel",this.aH);c.Cg(a,"wheel",this.aH);c.Cg(this.fh,"touchstart",this.A1);c.Cg(this.fh,"touchmove",this.z1);c.Cg(this.fh,"touchend",this.fI);c.Cg(this.fh,"touchcancel",this.fI);c.Cg(this.fh,"scroll",this.C0);this.C0=this.fI=this.z1=this.A1=this.aH=null;
this.$O&&this.Ik&&(this.$O.call(this.tx,a,this.Ik),this.$O.call(this.tx,this.Yl,this.Ik));this.Ik=null;this.VKa(this.Yl,a);a.removeChild(this.fh);a.removeChild(this.Mk);a.removeChild(this.ee);this.Yl=this.fh=this.ee=this.Mk=null;this.sW();this.YA=this.tx=this.to=this.pC=this.qC=this.wX=this.TN=this.ih=this.Ii=this.$O=this.RL=this.JX=this.ija=this.Qd=null};c.prototype.lD=function(){this.bh(!1)};c.prototype.pUa=function(a){this.Gy(a,!0)};c.prototype.IQa=function(){return this.Gj()};c.prototype.WKa=
function(a,c){for(var e=a.childNodes;0<e.length;){var f=e[0];this.qC&&this.qC(f);c.appendChild(f);1===f.nodeType&&this.gy&&this.Ii(f,this.gy)}};c.prototype.VKa=function(a,c){if(a)for(var e=a.childNodes;0<e.length;){var f=e[0];c.appendChild(f);1===f.nodeType&&this.gy&&this.ih(f,this.gy)}};c.aG=function(a){var c=a.ownerDocument.defaultView,e=null;return e=c?c.getComputedStyle(a,null):a.currentStyle};c.qCa=function(a){a=c.aG(a);return c.Fj(a.width)};c.pCa=function(a){a=c.aG(a);return c.Fj(a.height)};
c.Fj=function(a){return 0<a.length&&"auto"!=a?(a=parseInt(a,10),isNaN(a)&&(a=0),a):0};c.Hi=function(a,c,e){a.addEventListener?a.addEventListener(c,e,!1):a.attachEvent&&a.attachEvent("on"+c,e)};c.Cg=function(a,c,e){a.removeEventListener?a.removeEventListener(c,e,!1):a.detachEvent&&a.detachEvent("on"+c,e)};c.NDa=function(a){var c=0;return c=null!=a.wheelDelta?a.wheelDelta:null!=a.deltaY?-a.deltaY:-a.detail};c.MVa=function(){var a=document.createElement("div");a.style.display="table";return a};c.NVa=
function(){var a=document.createElement("div");a.style.display="table-row";return a};c.LVa=function(){var a=document.createElement("div");a.style.display="table-cell";return a};c.EWa=function(a,c,e,f){var g=document.createElement("div"),k=g.style;k.display="inline-block";g.appendChild(a);c.appendChild(g);e&&(k.maxWidth=g.offsetWidth+"px");f&&(k.maxHeight=g.offsetHeight+"px");return g};c.prototype.ce=function(){return"horizontal"===this.aJa};c.prototype.iHa=function(){return!this.Yca().hasChildNodes()};
c.prototype.uia=function(){this.N_=this.Gj();this.T0(0);this.$N();this.YN()};c.prototype.sW=function(){this.xP=this.Dg=null};c.prototype.bh=function(a){a||this.uia();this.sW();this.Dg&&this.xP||(this.Dg=this.hha());a||this.q$(!1);this.ixa()};c.prototype.ixa=function(){var a=this.Mk.style,c=this.ee.style,e=this.Yl,f=this.Dg;this.ce()?(e=.5*(f.fl-e.offsetHeight),a.top=e+"px",c.top=e+"px"):(e=.5*(f.qj-e.offsetWidth),this.aM&&(e=-e),a.left=e+"px",c.left=e+"px")};c.prototype.q$=function(a){var d=this.Yl,
e=this.ce(),f=e?c.qCa(this.Qd):c.pCa(this.Qd);this.ZG=0;this.XG=e?d.offsetWidth-f+this.V$:d.offsetHeight-f+this.U$;0>this.XG&&(this.XG=0);this.$N();this.YN();this.Gy(a?this.ZG:this.N_,!0);this.N_=0};c.prototype.tza=function(){var a=this,d=this.Qd,e=document.createElement("div");this.fh=e;this.Jha&&this.Ii(e,this.Jha);var f=document.createElement("div");this.Yl=f;this.Uaa&&this.Ii(f,this.Uaa);this.WKa(d,f);d.appendChild(e);e.appendChild(f);this.C0=function(){a.KFa()};c.Hi(e,"scroll",this.C0)};c.prototype.cCa=
function(){for(var a=[],c=this.YA?this.YA:this.Yl,e=c.children,f=e.length,g=0;g<f;g++){var k=e[g];1===k.nodeType&&a.push(k)}this.wX&&(g=this.wX,a=g(a));if(c===this.Yl&&this.gy)for(g=0;g<a.length;g++)c=a[g],this.TN(c,this.gy)||this.Ii(c,this.gy);return a};c.prototype.Fza=function(a,d,e){var f=this,g=document.createElement("div");this.ee=g;a&&g.setAttribute("id",a);g.setAttribute("class",d);g.setAttribute("aria-hidden","true");c.Hi(g,"click",function(){f.kja()});e&&g.appendChild(e);this.Qd.insertBefore(g,
this.fh)};c.prototype.wza=function(a,d,e){var f=this,g=document.createElement("div");this.Mk=g;a&&g.setAttribute("id",a);g.setAttribute("class",d);g.setAttribute("aria-hidden","true");c.Hi(g,"click",function(){f.jja()});e&&g.appendChild(e);this.Qd.appendChild(g)};c.prototype.Yca=function(){var a=this.YA;a||(a=this.Yl);return a};c.prototype.hha=function(){var a=this.Yca(),c=this.cCa(),e={qj:0,fl:0},f=[];if(a.hasChildNodes()&&c&&0<c.length)for(var a=this.ce(),g=0,g=this.Yl.offsetWidth,k=0,l=null,m=
0;m<c.length;m++){var p=c[m];if(1===p.nodeType){var t=p.offsetWidth,s=p.offsetHeight,n={qj:t,fl:s,id:p.id};if(a){var r=p.offsetLeft;this.YA||0!==r||(p=p.parentNode,r=p.offsetLeft);n.start=this.aM?g-(r+t):r;0===m&&(k=n.start);n.start-=k;e.qj=n.start+t;e.fl=Math.max(e.fl,s);n.end=e.qj-1}else r=p.offsetTop,this.YA||0!==r||(p=p.parentNode,r=p.offsetTop),n.start=r,e.qj=Math.max(e.qj,t),e.fl=n.start+s,n.end=e.fl-1;l&&l.end>=n.start&&(t=l.end-(n.start-1),l.end-=t,a?l.qj-=t:l.fl-=t);f.push(n);l=n}}this.xP=
f;return e};c.prototype.CB=function(){if(!this.xP){var a=this.hha();this.Dg||(this.Dg=a)}return this.xP};c.prototype.RMa=function(){this.ih(this.Mk,this.EB)};c.prototype.SMa=function(){this.ih(this.ee,this.EB)};c.prototype.YN=function(){this.Ii(this.Mk,this.EB)};c.prototype.$N=function(){this.Ii(this.ee,this.EB)};c.prototype.LB=function(){return!this.TN(this.Mk,this.EB)};c.prototype.PG=function(){return!this.TN(this.ee,this.EB)};c.prototype.QX=function(){return this.ce()?this.V$:this.U$};c.prototype.QNa=
function(a){var c=this.QX(),e=this.Gj(),f=this.FO();a<=this.ZG?(this.PG()&&(e-=c),this.$N()):f&&(this.PG()||(e+=c),this.SMa());a>=this.XG?(this.LB(),this.YN()):f&&(this.LB(),this.RMa());this.T0(e)};c.prototype.T0=function(a){var c=this.fh;this.ce()?c.scrollLeft=this.FW(a):c.scrollTop=a};c.prototype.dG=function(){var a=this.fh;return this.ce()?a.offsetWidth:a.offsetHeight};c.prototype.Gy=function(a,c){this.ku||(this.ZL=!1,this.wja(a,c))};c.prototype.wja=function(a,d){if(!this.iHa()){this.ku=!0;a=this.Tya(a);
this.QNa(a);var e=this.ija;if(d||!e||a===this.Gj())this.Bha(this.ZL?this.Gj():a);else{this.to&&(this.xk=this.to("scrolling"));var f=this;e.call(this.tx,this.fh,this.FW(a),Math.abs(this.Gj()-a)/c.Bva,function(){f.Bha(a);f.kn()})}}};c.prototype.kn=function(){this.xk&&(this.xk(),this.xk=null)};c.prototype.Gj=function(){var a=this.fh;return this.ce()?this.$ya(a.scrollLeft):a.scrollTop};c.prototype.FO=function(){var a=this.Yl,c=this.fh;return this.ce()?a.offsetWidth>c.offsetWidth:a.offsetHeight>c.offsetHeight};
c.prototype.Tya=function(a){!this.FO()||a<this.ZG?a=this.ZG:a>this.XG&&(a=this.XG);return a};c.prototype.yFa=function(a){var d=this.ku;if(this.FO()&&!this.ku){var e=c.NDa(a);0>e&&this.LB()?(d=!0,this.jja()):0<e&&this.PG()&&(d=!0,this.kja())}d&&(a.preventDefault(),a.stopPropagation())};c.prototype.EZ=function(a){a=a.touches;this.FO()&&!this.ku&&1===a.length&&(this.Um=!0,a=a[0],this.CP=this.ce()?a.pageX:a.pageY,this.B1=this.Gj(),this.zNa=this.caa(),this.ANa=this.daa(),this.Xka=this.LB(),this.Yka=this.PG())};
c.prototype.DZ=function(a){var d=this.ce(),e=a.touches[0],e=(d?e.pageX:e.pageY)-this.CP,f=d&&this.aM?0<e:0>e,g=f&&this.Xka||!f&&this.Yka;if(this.Um&&g){g=this.fh;if(Math.abs(e)<c.Sva*(d?g.offsetWidth:g.offsetHeight)){if(this.Gy(this.B1-e,!0),this.Xka&&!this.LB()||this.Yka&&!this.PG())this.Um=!1}else this.Gy(f?this.zNa:this.ANa,!1),this.Um=!1;this.Fy=!0}this.Fy&&(a.preventDefault(),a.stopPropagation())};c.prototype.BZ=function(){this.Um&&this.Gy(this.B1,!1);this.Fy=this.Um=!1};c.prototype.KFa=function(){this.ZL&&
!this.ku&&this.wja(this.Gj(),!0)};c.prototype.Bha=function(a){this.T0(a);this.ZL=!0;this.ku=!1;if(this.JX){this.nB=this.aaa();a=this.baa();var c=this.CB(),e=c[this.nB];this.nB!==a&&this.Gj()>e.start&&this.nB<c.length-2&&(this.nB++,e=c[this.nB]);this.yBa=e.id;this.JX.call(this.tx,this.yBa)}};c.prototype.jja=function(){this.ku||this.Gy(this.caa(),!1)};c.prototype.kja=function(){this.ku||this.Gy(this.daa(),!1)};c.prototype.caa=function(){var a=this.Zxa(),c=0;return c=a===this.aaa()?this.Gj()+this.dG():
this.aya(a)};c.prototype.daa=function(){var a=this.$xa(),c=0,c=a===this.baa()?this.Gj()-this.dG():this.Yxa(a);this.LB()||(c+=this.QX());c<this.QX()&&(c=this.ZG);return c};c.prototype.aya=function(a){return this.CB()[a].start};c.prototype.Yxa=function(a){return this.CB()[a].end-this.dG()+1};c.prototype.aaa=function(){var a=this.fM(this.Gj());return 0>a?0:a};c.prototype.baa=function(){var a=this.fM(this.Gj()+this.dG()-1),c=this.CB();return 0>a?c.length-1:a};c.prototype.$xa=function(){var a=this.fM(this.Gj()-
1);return 0>a?0:a};c.prototype.Zxa=function(){var a=this.fM(this.Gj()+this.dG()),c=this.CB();return 0>a?c.length-1:a};c.prototype.fM=function(a){for(var c=this.CB(),e=0;e<c.length;e++)if(a<=c[e].end)return e;return-1};c.prototype.FW=function(a){var c=a;if(this.aM&&this.ce())if(this.Dxa||this.G$&&10<=this.v$)c=-a;else if(this.Fxa||this.Exa||this.G$&&10>this.v$)c=this.Yl.offsetWidth-this.fh.offsetWidth-a;return c};c.prototype.$ya=function(a){return this.FW(a)};c.Bva=1.1;c.Sva=.33;(function(){a.ab("oj.ojConveyorBelt",
g.oj.baseComponent,{defaultElement:"\x3cdiv\x3e",widgetEventPrefix:"oj",options:{orientation:"horizontal",contentParent:null},_ComponentCreate:function(){this._super();this.element.addClass("oj-conveyorbelt oj-component");this.options.disabled&&a.C.warn(b);this.hb(!0)},refresh:function(){this._super();var a="rtl"===this.sd(),a=this.Li!=a,b;a||(b=this.Yp.IQa());this.aX();this.hb(!0);a||this.Yp.pUa(b)},Pp:function(){this._super();this.uf?this.hb(this.uf[0]):this.Yp&&this.Yp.lD()},oo:function(){this._super();
this.uf?this.hb(this.uf[0]):this.Yp&&this.Yp.lD()},hb:function(b){var f=this,h=this.element,k=this.options,l=k.orientation;"vertical"===l?h.addClass("oj-conveyorbelt-vertical"):h.removeClass("oj-conveyorbelt-vertical");if(this.rF()){this.uf=null;this.Li="rtl"===this.sd();if(b&&!this.Yp){var m=null,p=null,t=null,s=null,n=null;"vertical"!==l?(m="oj-enabled oj-conveyorbelt-overflow-indicator oj-start oj-default",p="oj-enabled oj-conveyorbelt-overflow-indicator oj-end oj-default",t=this.sM("oj-conveyorbelt-overflow-icon oj-start"),
s=this.sM("oj-conveyorbelt-overflow-icon oj-end"),n=this.mxa):(m="oj-enabled oj-conveyorbelt-overflow-indicator oj-top oj-default",p="oj-enabled oj-conveyorbelt-overflow-indicator oj-bottom oj-default",t=this.sM("oj-conveyorbelt-overflow-icon oj-top"),s=this.sM("oj-conveyorbelt-overflow-icon oj-bottom"),n=this.nxa);var r={};r.iqa=m;r.Qpa=p;r.hqa=t;r.Ppa=s;m={Xk:function(b,c){a.Q.Xk(b,c,d)}};m.zm=a.Q.zm;m.rI=this.Wwa;m.JJ=this.FKa;m.qoa=this.HZ;m.Fma=function(a){return f.qBa(a)};m.mg=a.Components.mg;
m.kf=a.Components.kf;m.Ld=function(a){return f.vk(a)};"enabled"!==a.oa.h3()&&(m.Hqa=n);n=null;k.contentParent&&(n=g(k.contentParent)[0]);k=a.Ra.qm(navigator.userAgent);this.Yp=new c(h[0],l,n,this.Li,r,m,{$pa:"oj-conveyorbelt-overflow-container",dma:"oj-conveyorbelt-content-container",Poa:"oj-conveyorbelt-item",toa:"oj-helper-hidden"},k)}this.Yp.yp(b);if(b)for(b=h.find(".oj-conveyorbelt-overflow-indicator"),h=0;h<b.length;h++)this.EMa(g(b[h]))}else h=!1,this.uf&&(h=this.uf[0]),this.uf=[b||h]},_destroy:function(){this.aX();
this.element.removeClass("oj-conveyorbelt oj-component oj-conveyorbelt-vertical");this._super()},_setOption:function(c,d,g){var k=!1,l=this.options;switch(c){case "containerParent":case "orientation":k=l.orientation!=d;break;case "disabled":a.C.warn(b)}k&&this.aX();this._super(c,d,g);k&&this.hb(!0)},aX:function(){var a=this.Yp;a&&(this.element.find(".oj-conveyorbelt-overflow-indicator").off(this.eventNamespace),a.destroy());this.Yp=null},rF:function(){var a=document.createElement("div"),b=a.style;
b.width="10px";b.height="10px";b["-webkit-flex"]="0 0 auto";b.flex="0 0 auto";b=this.element[0];b.appendChild(a);var c=!1;try{c=0<a.offsetWidth&&0<a.offsetHeight}catch(d){}b.removeChild(a);return c},EMa:function(a){this.Yf({element:a,afterToggle:function(b){"mouseenter"===b?a.removeClass("oj-default"):"mouseleave"===b&&a.addClass("oj-default")}});this.pk({element:a,afterToggle:function(b){"mousedown"===b||"touchstart"===b||"mouseenter"===b?a.removeClass("oj-default"):"mouseup"!==b&&"touchend"!==b&&
"touchcancel"!==b&&"mouseleave"!==b||a.addClass("oj-default")}})},sM:function(a){var b=document.createElement("span");b.setAttribute("class","oj-component-icon "+a);return b},mxa:function(a,b,c,d){var l={};l.scrollLeft=b;g(a).animate(l,c,"swing",d)},nxa:function(a,b,c,d){var l={};l.scrollTop=b;g(a).animate(l,c,"swing",d)},Wwa:function(a,b){g(a).addClass(b)},FKa:function(a,b){g(a).removeClass(b)},HZ:function(a,b){return g(a).hasClass(b)},qBa:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];
this.HZ(d,"oj-helper-detect-expansion")||this.HZ(d,"oj-helper-detect-contraction")||b.push(d)}return b},vk:function(b){var c=this.element,d=a.Context.getContext(c[0]).Ne(),g="ConveyorBelt",c=c.attr("id"),g=g+(" (id\x3d'"+c+"')")+(": "+b);return d.Ld({description:g})},getNodeBySubId:function(a){if(null==a)return this.element?this.element[0]:null;a=a.subId;return"oj-conveyorbelt-start-overflow-indicator"===a?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-start")[0]:"oj-conveyorbelt-end-overflow-indicator"===
a?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-end")[0]:"oj-conveyorbelt-top-overflow-indicator"===a?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-top")[0]:"oj-conveyorbelt-bottom-overflow-indicator"===a?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-bottom")[0]:null},getSubIdByNode:function(a){for(var b=this.getNodeBySubId({subId:"oj-conveyorbelt-start-overflow-indicator"}),c=this.getNodeBySubId({subId:"oj-conveyorbelt-end-overflow-indicator"}),d=this.getNodeBySubId({subId:"oj-conveyorbelt-top-overflow-indicator"}),
g=this.getNodeBySubId({subId:"oj-conveyorbelt-bottom-overflow-indicator"}),m=this.element[0];a&&a!=m;){if(a===b)return{subId:"oj-conveyorbelt-start-overflow-indicator"};if(a===c)return{subId:"oj-conveyorbelt-end-overflow-indicator"};if(a===d)return{subId:"oj-conveyorbelt-top-overflow-indicator"};if(a===g)return{subId:"oj-conveyorbelt-bottom-overflow-indicator"};a=a.parentElement}return null}});var b="JET ConveyorBelt: 'disabled' option not supported",d=25})();a.U.qb("oj-conveyor-belt","baseComponent",
{properties:{contentParent:{type:"string"},orientation:{type:"string",enumValues:["horizontal","vertical"]}},extension:{nb:"ojConveyorBelt"}});a.U.register("oj-conveyor-belt",{metadata:a.U.getMetadata("oj-conveyor-belt")})});