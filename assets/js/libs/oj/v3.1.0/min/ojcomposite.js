/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","promise","ojs/ojcustomelement","ojs/ojcomposite-knockout"],function(a){a.Jb={};a.Jb.qr=Object.create(a.ia.qr);a.uc.fe(a.Jb.qr,{CS:function(b){b.setProperty=function(b,c){if(a.kd.PC(b))this[b]=c;else{var f=this.getProperty(b),g=a.ia.lc(this),k=a.ia.bD(g),l=b.split("."),m=a.ia.YE(b,k);if(m||1!=l.length){if(k[l[0]].readOnly)throw"Read-only property "+b+" cannot be set on "+this.tagName;a.ia.XE(this,b,c,m);a.ia.IL(g.$z.bind(g),this,b,c);g.g9&&-1!==b.indexOf(".")&&a.Jb.HX(this,b,
c,f,"external")}else a.C.error("Ignoring property set for undefined property "+b+" on "+this.tagName)}};b.getProperty=function(b){var c=a.kd.PC(b);return c?c:-1!==b.indexOf(".")?a.ia.U9(this,b):this[b]};b._propsProto.setProperty=function(b,c){var f=this.getProperty(b),g=a.ia.YE(b,a.ia.bD(this.rA));g||-1!==b.indexOf(".")?(a.ia.XE(this.Uw,b,c,g),a.ia.IL(this.rA.$z.bind(this.rA),this,b,c),-1!==b.indexOf(".")&&a.Jb.HX(this.Uw,b,c,f,"internal")):a.C.error("Ignoring property set for undefined property "+
b+" on "+this.Uw.tagName)};b._propsProto.getProperty=function(b){return-1!==b.indexOf(".")?a.ia.U9(this,b):this[b]};b.getNodeBySubId=function(b){var c=a.ia.lc(this);return c.nx.getNodeBySubId?c.nx.getNodeBySubId(b,c.Sda.bind(this)):c.Sda.bind(this)(b)};b.getSubIdByNode=function(b){var c=a.ia.lc(this);return c.nx.getSubIdByNode?c.nx.getSubIdByNode(b,c.pea.bind(this)):c.pea.bind(this)(b)}},OS:function(b,c,e){b[c]=function(){var b=e.internalName||c,g=a.ia.lc(this);return g.nx[b].apply(g.nx,arguments)}},
PS:function(b,c,e){function f(a){g.bind(this)(a,!1)}function g(b,f){var h=a.Jb.FY(this.rA,c),p=h.peek();p!==b&&(a.ia.XE(this.Uw,c,b,e),h(b),e.TM&&(h=a.kd.PC(c),p&&this.Uw.removeEventListener(h,p),b&&b instanceof Function&&this.Uw.addEventListener(h,b)),!e.$W&&(!f||f&&this.rA.g9)&&a.Jb.HX(this.Uw,c,b,p,f?"external":"internal"))}e.$W||a.Jb.Cba(b._propsProto,c,function(){var b=a.Jb.FY(this.rA,c)();return null==b?e.value:b},f);a.Jb.Cba(b,c,function(){var b=a.ia.lc(this),b=a.Jb.FY(b,c).peek();return null==
b?e.value:b},function(b){if(e.readOnly)throw"Read-only property "+c+" cannot be set on "+this.tagName;var f=a.ia.lc(this);g.bind(f.Sp)(b,!0)})},jE:function(a){return a._metadata},gT:function(b){a.ia.V9(b,this.Sp,a.ia.bD(this),this.qK);this.ZS().Iz()},hT:function(b,c){if(this.Zw){var e=this;this.mta=this.Zw.then(function(b){return a.Qh.oD(b,"activatedMethod",[e.nV])})}this.QU.Iz(this.Sp);var f={},g=a.Qh.sPa(b),k;for(k in g)f[k]=g[k].length;this.Qva=g;this.m9.Iz(f);e=this;Promise.all([this.lwa,this.Zw,
this.QU.MI(),this.Ata,this.mta]).then(function(g){g=g[0];if(!g)throw"ojComposite is missing a View";a.Qh.MTa({props:e.Sp,zUa:e.Qva,AUa:f,unique:e.nV.unique,pw:e.nx,Jra:e.nV},b,g,c);a.Jb.Fx("ready",b);e.g9=!0;e.dK().Iz()})},p6:function(b){this.Zw&&this.Zw.then(function(c){a.Qh.oD(c,"disposeMethod",[b])})},iT:function(b){a.Jb.Fx("pending",b);var c=a.ia.qV(b.tagName);if(!c)throw"Composite is missing a descriptor";this.Kw=this.jE(c);this.qK=c.parseFunction;b._propsProto&&(this.Sp=Object.create(b._propsProto),
this.Sp.rA=this,this.Sp.Uw=b);this.QU=new a.ia.GL;this.m9=new a.ia.GL;var e={element:b,props:this.QU.MI(),slotNodeCounts:this.m9.MI(),unique:a.Jb.IDa()};this.nV=e;if(b=a.Jb.yN(c,"viewModel")){var f=this;this.Zw=b.then(function(b){b="function"===typeof b?new b(e):a.Qh.oD(b,"initializeMethod",[e])||b;return f.nx=b})}if(b=a.Jb.yN(c,"view"))this.lwa=b.then(function(b){return a.Jb.lCa(b)});if(c=a.Jb.yN(c,"css"))this.Ata=c.then(function(a){var b=document.createElement("style");b.type="text/css";b.styleSheet?
b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));document.head.appendChild(b)})},jT:function(b){this.Zw&&this.Zw.then(function(c){a.Qh.oD(c,"detachedMethod",[b])})},t6:function(a){Object.defineProperty(a,"_propsProto",{value:{}})},Sda:function(b){var c=a.Jb.pwa(this)[b.subId];return c?c.alias?(b=a.uc.fe({},b,void 0,!0),b.subId=c.alias,c=c.node,c.getNodeBySubId?c.getNodeBySubId(b):a.Components.md(c)("getNodeBySubId",b)):c.node:null},pea:function(b){if(!this.contains(b))return null;
var c=a.Jb.owa(this),e=a.hk.Yma(b,this);if(null!=e){var f=e.xm.getAttribute("data-oj-subid-map");return(c=c[f])&&e.getSubIdByNode&&(b=e.getSubIdByNode(b))?(b.subId=c.map[b.subId],b):null}for(e=b;e!==this&&!(f=e.getAttribute("data-oj-subid-map")||e.getAttribute("data-oj-subid"));)e=e.parentNode;if(c=c[f])if(c.map){if(f=c.node,b=f.getSubIdByNode?f.getSubIdByNode(b):a.Components.md(f)("getSubIdByNode",b))return b.subId=c.map[b.subId],b}else return{subId:f};return null}});a.Jb.register=function(b,c){a.ia.Y9(b,
c,a.Jb.qr)&&a.Jb.getMetadata(b).then(function(e){var f=e.name;f?b!=f&&a.C.warn("Registered property tagName: %s does not match name: %s provided in metadata.",b,f):a.C.warn('Required property "name" missing from metadata for %s.',b);e.version||a.C.warn('Required property "version" missing from metadata for %s.',b);e.jetVersion||a.C.warn('Required composite "jetVersion" missing from metadata for %s.',b);c._metadata=a.ia.X9(e,!1);document.registerElement(b.toLowerCase(),{prototype:a.Jb.qr.xna(c)})})};
a.Jb.getMetadata=function(b){var c=a.ia.qV(b);if(c){var e=c._metadataPromise;e||(e=a.Jb.yN(c,"metadata"),e||(a.C.warn("Required metadata is missing for "+b),e=Promise.resolve({})),c._metadataPromise=e);return e}return null};a.Jb.Cba=function(a,c,e,f){Object.defineProperty(a,c,{enumerable:!0,get:e,set:f})};a.Jb.Fx=function(a,c){c.dispatchEvent(new CustomEvent(a,{bubbles:!0}))};a.Jb.HX=function(a,c,e,f,g){var k={},l=c.split("."),m=c,p=e,t=f;1<l.length&&(m={},m.path=c,m.value=e,m.previousValue=f,k.subproperty=
m,m=l[0],t=p=a[m]);k.value=p;k.previousValue=t;k.updatedFrom=g;a.dispatchEvent(new CustomEvent(m+"-changed",{detail:k}));a.dispatchEvent(new CustomEvent(m+"Changed",{detail:k}))};a.Jb.lCa=function(b){if("string"===typeof b){var c=document.createElement("div");c.innerHTML=b;for(var e=[],f=0;f<c.childNodes.length;f++)e.push(c.childNodes[f]);return e}if(a.Jb.gHa(b)){e=[];for(f=0;f<b.childNodes.length;f++)e.push(b.childNodes[f]);return e}if(Array.isArray(b))return b.splice(0);throw"The View ("+b+") has an unsupported type";
};a.Jb.Jca=function(b,c){if(!b.o9){for(var e={},f={},g=c.children,k=0;k<g.length;k++)a.Jb.ula(e,f,g[k]);b.Wua=f;b.o9=e}};a.Jb.ula=function(b,c,e){if(!e.hasAttribute("slot")&&(a.Jb.Swa(b,c,e),!a.ia.Kv(e.tagName)&&!a.Components.md(e))){e=e.children;for(var f=0;f<e.length;f++)a.Jb.ula(b,c,e[f])}};a.Jb.Swa=function(a,c,e){var f=e.getAttribute("data-oj-subid"),g=e.getAttribute("data-oj-subid-map");if(g){if(f=JSON.parse(g),"object"===typeof f&&!(f instanceof Array)){var k={},l;for(l in f)a[l]={alias:f[l],
node:e},k[f[l]]=l;c[g]={map:k,node:e}}}else f&&(a[f]={node:e},c[f]={node:e})};a.Jb.pwa=function(b){var c=a.ia.lc(b);a.Jb.Jca(c,b);return c.o9};a.Jb.owa=function(b){var c=a.ia.lc(b);a.Jb.Jca(c,b);return c.Wua};a.Jb.FY=function(b,c){b.yL||(b.yL={});b.yL[c]||(b.yL[c]=a.Qh.HPa());return b.yL[c]};a.Jb.yN=function(a,c){var e=null,f=a[c];if(null!=f){e=Object.keys(f)[0];f=f[e];if(null==e)throw"Invalid component descriptor key";switch(e){case "inline":e=Promise.resolve(f);break;case "promise":e=f;break;default:throw"Invalid descriptor key "+
e+" for the resource type: "+c;}}return e};a.Jb.IDa=function(){return c+g++};a.Jb.gHa=function(a){return window.DocumentFragment?a instanceof DocumentFragment:a&&11===a.nodeType};a.Jb.Gga=function(a){return 1===a.nodeType||3===a.nodeType};var g=0,c="_ojcomposite";a.hk={};a.hk.td={initializeMethod:"initialize",activatedMethod:"activated",attachedMethod:"attached",bindingsAppliedMethod:"bindingsApplied",detachedMethod:"detached",disposeMethod:"dispose"};o_("Composite.defaults",a.hk.td,a);a.hk.getMetadata=
function(b){return a.Jb.getMetadata(b)};o_("Composite.getMetadata",a.hk.getMetadata,a);a.hk.register=function(b,c){a.Jb.register(b,c)};o_("Composite.register",a.hk.register,a);a.hk.Yma=function(b,c){for(var e=null;b;)if(b=a.Qh.rQa(b)){if(c&&!(b.compareDocumentPosition(c)&16))break;e=b}return e};a.hk.S9="__oj_composite"});